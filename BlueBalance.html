<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blue Balance - AI NPC Integration</title>
    <link rel="stylesheet" href="project.css">
    <link rel="icon" type="image/png" href="./assets/favicon.png">
    <style>
        .video-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .video-indicator:before {
            content: '';
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-left: 12px solid white;
            border-bottom: 8px solid transparent;
            margin-left: 3px; /* Slight offset for visual balance */
        }
        
        .thumbnail {
            position: relative;
        }
    </style>
</head>
<body>
  <div id="projects" style="height: 100%;">
    <p class="go_back_text">
        <a href="index.html#projects">< Back to Portfolio</a>
    </p>
    <h1 class="title">Blue Balance - AI NPC Integration</h1>
</div>
      <!-- Media Gallery -->
      <div class="media-gallery" style="margin-bottom: 2.5rem;">
          <div class="main-media-display" style="border: 2px solid #293341;">
              <video class="video" width="960" height="540" controls autoplay muted loop data-type="video">
                  <source src="./assets/BlueBalanceVideo.webm" type="video/webm">
                  Your browser does not support the video tag.
              </video>
          </div>
          <div class="thumbnail-container">
              <div class="thumbnail active" data-src="./assets/BlueBalanceVideo.webm" data-type="video">
                  <span class="video-indicator"></span>
              </div>
              <div class="thumbnail" data-src="./assets/BlueBalanceMedia-1.jpg" data-type="image">
                  <img src="./assets/BlueBalanceMedia-1.jpg" alt="Thumbnail 3" width="100" height="56">
              </div>
              <div class="thumbnail" data-src="./assets/BlueBalanceMedia-2.jpg" data-type="image">
                  <img src="./assets/BlueBalanceMedia-2.jpg" alt="Thumbnail 4" width="100" height="56">
              </div>
              <div class="thumbnail" data-src="./assets/BlueBalanceMedia-3.jpg" data-type="image">
                  <img src="./assets/BlueBalanceMedia-3.jpg" alt="Thumbnail 5" width="100" height="56">
              </div>
              <div class="thumbnail" data-src="./assets/BlueBalanceMedia-4.jpg" data-type="image">
                  <img src="./assets/BlueBalanceMedia-4.jpg" alt="Thumbnail 6" width="100" height="56">
              </div>
              <div class="thumbnail" data-src="./assets/BlueBalanceMedia-5.jpg" data-type="image">
                  <img src="./assets/BlueBalanceMedia-5.jpg" alt="Thumbnail 7" width="100" height="56">
              </div>
          </div>
      </div>

      <div class="btn-container" style="display: flex; justify-content: center; align-items: center;">
        <button
            class="btn btn-color-2 btn-switch"
            onclick="window.open('https://thegdwc.com/pages/game.php?game_guid=f8efbf30-7f8d-4a35-846c-5b5edca945fb', '_blank')">
          <span class="btn-content">
            <img src="./assets/GDWC.png" alt="Icon" class="btn-icon default-icon"> <!-- Placeholder icon -->
            GDWC Page
          </span>
        </button>
        <p style="font-size: 0.8rem; margin-left: 1rem; opacity: 0.7;">*Build available upon request via email due to project constraints.</p>
      </div>

      <section>
        <div class="section-content">
            <p class="title2-header">What I have</p>
            <h1 class="title2">Learned</h1>

            <p class="title3">Integrating LLMs in Unreal Engine 5</p>
            <div class="paragraph-container">
                <!-- Replace with relevant image -->
                <img src="./assets/placeholder_image.png" alt="Image" class="image-container image-left"> <!-- Placeholder -->
                <p class="paragraph-left">
                    This project served as a practical exploration into integrating Large Language Models (LLMs) into a game environment using Unreal Engine 5.
                    We utilized the Convai framework to bring dynamic, conversational AI characters to life. A key challenge was managing the interaction
                    flow between the player, the game state, and the LLM to ensure coherent and contextually relevant dialogue while maintaining performance.
                    I gained experience in designing systems that handle asynchronous API calls to the LLM and translating natural language responses into in-game actions or information display.
                </p>
            </div>

            <p class="title3">Designing Educational Gameplay Loops</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    Blue Balance aimed to educate players about local fish and the fishing industry in an engaging way. This required designing gameplay loops
                    centered around interacting with AI fishermen, learning from them, and applying that knowledge (e.g., sorting fish). I focused on balancing the educational
                    content delivery with fun, interactive mechanics, ensuring the learning process felt natural and embedded within the game's narrative and tasks.
                    The goal was to create a platform for conversation and information dissemination without sacrificing player engagement.
                </p>
            </div>

             <p class="title3">AI Character Behavior and Narrative Integration</p>
            <div class="paragraph-container">
                 <p class="paragraph-right">
                    Beyond the LLM integration for dialogue, crafting believable AI characters involved developing their backstories, motivations, and daily routines aboard the ship.
                    The project emphasized not just *what* the characters said (handled by the LLM), but *how* they behaved and integrated into the game world.
                    This involved scripting specific interactions, managing character states, and ensuring their dialogue contributed to both the educational goals and the overarching narrative of getting to know the crew over three days.
                </p>
                 <!-- Replace with relevant image -->
                <img src="./assets/placeholder_image2.png" alt="Image" class="image-container image-right"> <!-- Placeholder -->
            </div>
        </div>
    </section>

    <section>
        <div class="section-content">
            <p class="title2-header">What I would</p>
            <h1 class="title2">Like to Add</h1>

            <p class="title3">More Dynamic AI Interactions</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    While the Convai integration provided a solid foundation, I'd like to explore more dynamic AI interactions. This could involve giving the AI
                    more awareness of the game state (e.g., time of day, weather, current player task) to influence their conversations, or allowing player
                    dialogue choices to have more tangible long-term effects on relationships with the crew or the progression of the narrative.
                </p>
            </div>

            <p class="title3">Expanded Gameplay Mechanics</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    The core loop involves sorting fish and talking to fishermen. Expanding on this with additional mini-games related to fishing or ship maintenance
                    could enhance engagement. For example, adding a simple navigation task or allowing the player to assist with different types of fishing gear,
                    each tied back to educational information provided by the AI crew.
                </p>
            </div>

            <p class="title3">Refined Educational Content Delivery</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    Further refining how the educational content is presented is another area for improvement. This could involve enhancing the in-game notebook with
                    more interactive elements, visual aids, or even short quizzes based on conversations with the fishermen to reinforce learning in a fun way.
                    Integrating feedback mechanisms to gauge player understanding could also tailor the information flow.
                </p>
            </div>
        </div>
    </section>

    <script>
      // Function to generate video thumbnails
      async function generateVideoThumbnail(thumbnailDiv) {
        const videoSrc = thumbnailDiv.dataset.src;
        if (!videoSrc) return;

        thumbnailDiv.classList.add('loading'); // Show loading indicator

        try {
          const video = document.createElement('video');
          const canvas = document.createElement('canvas');
          const context = canvas.getContext('2d');

          video.src = videoSrc;
          video.muted = true;
          video.playsInline = true;
          video.preload = 'metadata';

          await new Promise((resolve, reject) => {
            video.onloadedmetadata = () => {
              video.currentTime = 0.1; // Seek slightly into the video
            };
            video.onseeked = async () => {
              // Set canvas dimensions
              canvas.width = video.videoWidth;
              canvas.height = video.videoHeight;
              // Draw the video frame to the canvas
              context.drawImage(video, 0, 0, canvas.width, canvas.height);
              // Set canvas content as background image
              thumbnailDiv.style.backgroundImage = `url(${canvas.toDataURL('image/jpeg')})`;
              resolve();
            };
            video.onerror = (e) => {
                console.error('Error loading video for thumbnail:', videoSrc, e);
                reject(e);
            }
            // Start loading the video
            video.load(); 
          });

        } catch (error) {
          console.error("Error generating thumbnail for", videoSrc, error);
          // Optionally set a fallback background
          thumbnailDiv.style.backgroundColor = '#555'; // Indicate error
        } finally {
          thumbnailDiv.classList.remove('loading'); // Hide loading indicator
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        const mainMediaDisplay = document.querySelector('.main-media-display');
        const thumbnails = document.querySelectorAll('.thumbnail');

        // Generate thumbnails for video types and add video indicators
        thumbnails.forEach(thumbnail => {
          if (thumbnail.dataset.type === 'video') {
            generateVideoThumbnail(thumbnail);
            
            // Add video indicator if not already present
            if (!thumbnail.querySelector('.video-indicator')) {
              const indicator = document.createElement('span');
              indicator.className = 'video-indicator';
              thumbnail.appendChild(indicator);
            }
          }
        });

        // Existing click handler logic
        thumbnails.forEach(thumbnail => {
          thumbnail.addEventListener('click', () => {
            const activeThumbnail = document.querySelector('.thumbnail.active');
            if (thumbnail === activeThumbnail) return;

            activeThumbnail?.classList.remove('active');
            thumbnail.classList.add('active');

            const src = thumbnail.dataset.src;
            const type = thumbnail.dataset.type;
            const currentMediaElement = mainMediaDisplay.querySelector('video, img');

            let newMediaElement;
            if (type === 'video') {
              newMediaElement = document.createElement('video');
              newMediaElement.src = src;
              newMediaElement.controls = true;
              newMediaElement.autoplay = true;
              newMediaElement.muted = thumbnail === thumbnails[0];
              newMediaElement.loop = thumbnail === thumbnails[0];
              newMediaElement.dataset.type = 'video';
            } else if (type === 'image') {
              newMediaElement = document.createElement('img');
              newMediaElement.src = src;
              newMediaElement.alt = 'Project Media';
              newMediaElement.dataset.type = 'image';
            }

            if (newMediaElement) {
              newMediaElement.style.opacity = '0';
              mainMediaDisplay.appendChild(newMediaElement);

              requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    if (currentMediaElement) {
                        currentMediaElement.style.opacity = '0';
                        setTimeout(() => {
                          currentMediaElement.remove();
                        }, 300);
                    }
                    newMediaElement.style.opacity = '1';
                });
              });
            }
          });
        });
      });
    </script>
</body>
</html> 