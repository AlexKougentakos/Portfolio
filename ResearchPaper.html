<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMCTS Research Paper - Tichu AI</title>
    <link rel="stylesheet" href="project.css">
    <link rel="icon" type="image/png" href="./assets/favicon.png">
</head>
<body>
  <div id="projects" style="height: 100%;">
    <p class="go_back_text">
        <a href="index.html#projects">< Back to Portfolio</a>
    </p>
    <h1 class="title">Research: DMCTS Viability in Tichu</h1>
</div>
    <!-- Replace with actual video/image -->
    <div class="media-gallery" style="margin-bottom: 2.5rem;">
        <div class="main-media-display" style="border: 2px solid #293341;">
            <video class="video" width="960" height="540" controls autoplay muted loop data-type="video">
                <source src="./assets/placeholder_video2.webm" type="video/webm"> <!-- Placeholder -->
                Your browser does not support the video tag.
            </video>
        </div>
        <div class="thumbnail-container">
            <div class="thumbnail active" data-src="./assets/placeholder_video2.webm" data-type="video">
                <!-- Thumbnail will be generated by JS -->
            </div>
            <div class="thumbnail" data-src="./assets/ResearchPaperCover.png" data-type="image">
                <img src="./assets/ResearchPaperCover.png" alt="Thumbnail 2" width="100" height="56">
            </div>
            <!-- Add more thumbnails here -->
        </div>
    </div>


      <div class="btn-container">
        <button
            class="btn btn-color-2 btn-switch"
            onclick="window.open('./assets/DMCTS_Research_Paper.pdf', '_blank')"> <!-- Placeholder PDF link -->
          <span class="btn-content">
            <img src="./assets/download-white.png" alt="Icon" class="btn-icon default-icon">
            Read Paper (PDF)
          </span>
        </button>
        <button
            class="btn btn-color-1"
            onclick="window.open('./OdysseyTichu/Tichu.html', '_self')">
          <span class="btn-content">
            <img src="./assets/TichuCover.png" alt="Icon" class="btn-icon"> <!-- Using Tichu game cover -->
            Related Project
          </span>
        </button>
      </div>

      <section>
        <div class="section-content">
            <p class="title2-header">What I have</p>
            <h1 class="title2">Learned</h1>

            <p class="title3">DMCTS for Imperfect Information Games</p>
            <div class="paragraph-container">
                <!-- Replace with relevant image -->
                <img src="./assets/placeholder_image3.png" alt="Image" class="image-container image-left"> <!-- Placeholder -->
                <p class="paragraph-left">
                    This research focused on evaluating Determinized Monte Carlo Tree Search (DMCTS) for complex, team-based, imperfect information games like Tichu.
                    I gained a deep understanding of MCTS principles and the determinization technique used to handle hidden information.
                    Benchmarking against cheating MCTS and random agents provided insights into its strengths and weaknesses in this specific domain, contributing to the growing field of AI for such games.
                </p>
            </div>

            <p class="title3">Parameter Tuning and Performance Analysis</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    A key part of the study involved analyzing DMCTS performance. I learned that simply increasing iterations yields better results than only increasing determinizations, and that sufficient iterations are needed to support more determinizations.
                    An interesting discovery was the linear decrease in computation time per move as the game progressed (due to the shrinking card pool), suggesting potential for dynamic parameter adjustments.
                </p>
            </div>

             <p class="title3">Importance of Human Evaluation</p>
            <div class="paragraph-container">
                 <p class="paragraph-right">
                    While algorithmic benchmarks are crucial, this study highlighted the necessity of human evaluation. Experienced players tested the AI, revealing weaknesses and performance aspects not apparent from simulations alone.
                    This emphasized that seemingly strong on-paper performance doesn't always translate directly to effective play against human opponents, providing valuable perspective on AI evaluation methodologies.
                 </p>
                <!-- Replace with relevant image -->
                <img src="./assets/placeholder_image4.png" alt="Image" class="image-container image-right"> <!-- Placeholder -->
            </div>
        </div>
    </section>

    <section>
        <div class="section-content">
            <p class="title2-header">What I would</p>
            <h1 class="title2">Like to Add / Explore</h1>

            <p class="title3">Implementing Excluded Tichu Mechanics</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    To create a more complete Tichu AI, I would implement the mechanics excluded from the initial research scope due to complexity.
                    This includes handling Tichu/Grand Tichu declarations (potentially with a separate heuristic), incorporating Mahjong wishes, and tackling the challenge of asynchronous bomb plays, which would require significant algorithmic adjustments.
                </p>
            </div>

            <p class="title3">Dynamic Parameter Adjustment</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    Building on the finding that computation time decreases linearly, I'd like to implement a system for dynamic iteration/determinization adjustments during gameplay.
                    This could potentially increase the playing performance of the AI by allocating more iterations/determinizations later in the game when the decision space is smaller.
                    It was very clear that more iterations showed better results.
                </p>
            </div>

            <p class="title3">Comparative Algorithm Analysis</p>
            <div class="paragraph-container">
                <p class="paragraph-center">
                    Further research could involve comparing DMCTS performance in Tichu against other algorithms suitable for imperfect information games.
                    This could provide a broader context for its effectiveness and potentially identify hybrid approaches or alternative methods that might perform better in specific aspects of the game.
                    Refining the reward function and conducting larger-scale human studies would also be valuable additions.
                </p>
            </div>
        </div>
    </section>

    <script>
      // Function to generate video thumbnails
      async function generateVideoThumbnail(thumbnailDiv) {
        const videoSrc = thumbnailDiv.dataset.src;
        if (!videoSrc) return;

        thumbnailDiv.classList.add('loading'); // Show loading indicator

        try {
          const video = document.createElement('video');
          const canvas = document.createElement('canvas');
          const context = canvas.getContext('2d');

          video.src = videoSrc;
          video.muted = true;
          video.playsInline = true;
          video.preload = 'metadata';

          await new Promise((resolve, reject) => {
            video.onloadedmetadata = () => {
              video.currentTime = 0.1; // Seek slightly into the video
            };
            video.onseeked = async () => {
              // Set canvas dimensions
              canvas.width = video.videoWidth;
              canvas.height = video.videoHeight;
              // Draw the video frame to the canvas
              context.drawImage(video, 0, 0, canvas.width, canvas.height);
              // Set canvas content as background image
              thumbnailDiv.style.backgroundImage = `url(${canvas.toDataURL('image/jpeg')})`;
              resolve();
            };
            video.onerror = (e) => {
                console.error('Error loading video for thumbnail:', videoSrc, e);
                reject(e);
            }
            // Start loading the video
            video.load(); 
          });

        } catch (error) {
          console.error("Error generating thumbnail for", videoSrc, error);
          // Optionally set a fallback background
          thumbnailDiv.style.backgroundColor = '#555'; // Indicate error
        } finally {
          thumbnailDiv.classList.remove('loading'); // Hide loading indicator
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        const mainMediaDisplay = document.querySelector('.main-media-display');
        const thumbnails = document.querySelectorAll('.thumbnail');

        // Generate thumbnails for video types
        thumbnails.forEach(thumbnail => {
          if (thumbnail.dataset.type === 'video') {
            generateVideoThumbnail(thumbnail);
          }
        });

        // Existing click handler logic
        thumbnails.forEach(thumbnail => {
          thumbnail.addEventListener('click', () => {
            const activeThumbnail = document.querySelector('.thumbnail.active');
            if (thumbnail === activeThumbnail) return;

            activeThumbnail?.classList.remove('active');
            thumbnail.classList.add('active');

            const src = thumbnail.dataset.src;
            const type = thumbnail.dataset.type;
            const currentMediaElement = mainMediaDisplay.querySelector('video, img');

            let newMediaElement;
            if (type === 'video') {
              newMediaElement = document.createElement('video');
              newMediaElement.src = src;
              newMediaElement.controls = true;
              newMediaElement.autoplay = true;
              newMediaElement.muted = thumbnail === thumbnails[0];
              newMediaElement.loop = thumbnail === thumbnails[0];
              newMediaElement.dataset.type = 'video';
            } else if (type === 'image') {
              newMediaElement = document.createElement('img');
              newMediaElement.src = src;
              newMediaElement.alt = 'Project Media';
              newMediaElement.dataset.type = 'image';
            }

            if (newMediaElement) {
              newMediaElement.style.opacity = '0';
              mainMediaDisplay.appendChild(newMediaElement);

              requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    if (currentMediaElement) {
                        currentMediaElement.style.opacity = '0';
                        setTimeout(() => {
                          currentMediaElement.remove();
                        }, 300);
                    }
                    newMediaElement.style.opacity = '1';
                });
              });
            }
          });
        });
      });
    </script>
</body>
</html> 